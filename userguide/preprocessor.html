<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta content="user-scalable=no,width=device-width,initial-scale=1" name="viewport">
  <title></title>
  <link href="../static/css/app.81ce302a26eb3c78bc00a8e64efd417e.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js" type="text/javascript"></script>
</head>
<body>
  <div id="app">
    <div class="tutorial">
      <div id="header">
        <div class="flex flex-middle header mobile-hidden" id="p-header">
          <div class="full-width container-t1">
            <div class="flex flex-middle flex-between">
              <a class="flex flex-middle logo-wrapper router-link-active" href="../index.html"><img src="../img/mindmeld-logo.png"></a>
              <div class="flex flex-middle">
                <div class="flex flex-middle navi-list">
                  <div class="navi-item">
                    <a class="cursor-pointer bold fs-30 router-link-exact-active router-link-active" href="../index.html">Home</a>
                  </div>
                  <div class="navi-item navi-active">
                    <a class="cursor-pointer bold fs-30 router-link-exact-active router-link-active" href="overview.html">Documentation</a>
                  </div>
                </div><button class="border-button bold fs-30" href="../userguide/getting_started.html">Get Started</button>
              </div>
            </div>
          </div>
        </div>
        <div class="mobile-show" id="top-bar__mobile" style="height: 60px; background-color: rgb(255, 255, 255);">
          <div class="menu-icon" style="height: 44px; margin-top: 8px;">
            <label class="menu-hmbg"><span class="menu-icon-hmbg menu-icon-hmbg-top"><span class="hmbg-line hmbg-line-top"></span></span> <span class="menu-icon-hmbg menu-icon-hmbg-bottom"><span class="hmbg-line hmbg-line-bottom"></span></span></label>
          </div>
          <div class="bar-logo__mobile position-center">
            <a class="position-center-middle router-link-exact-active router-link-active" href="/" style="height: 40px;"><img src="../img/mindmeld-logo.png" style="height: 100%; text-align: center; display: none;"> <img src="../img/mindmeld-logo.png" style="height: 100%; text-align: center;"></a>
          </div>
        </div>
        <div class="navigates__mobile" style="left: -100%;">
          <div class="mobile_left-side">
            <div aria-label="main navigation" class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation">
              <p class="caption"><span class="caption-text">Introduction</span></p>
              <ul class="current">
                <li class="toctree-l1">
                  <a class="reference internal" href="../introduction/introduction_to_conversational_applications.html">Introduction to Conversational Applications</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../introduction/approaches_for_building_conversational_applications.html">Different Approaches for Building Conversational Applications</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../introduction/anatomy_of_a_conversational_ai_interaction.html">Anatomy of a Conversational AI Interaction</a>
                </li>
                <li class="toctree-l1 current">
                  <a class="current reference internal" href="../introduction/introducing_mindmeld_workbench.html">Introducing MindMeld Workbench</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../introduction/key_concepts.html">Key Concepts</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Step-by-Step Guide</span></p>
              <ul>
                <li class="toctree-l1">
                  <a class="reference internal" href="../quickstart/00_overview.html">Building a Conversational Interface in 10 Steps</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../quickstart/01_select_the_right_use_case.html">Step 1: Select the Right Use Case</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../quickstart/02_script_interactions.html">Step 2: Script Your Ideal Dialogue Interactions</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../quickstart/03_define_the_hierarchy.html">Step 3: Define the Domain, Intent, Entity, and Role Hierarchy</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../quickstart/04_define_the_dialogue_handlers.html">Step 4: Define the Dialogue State Handlers</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../quickstart/05_create_the_knowledge_base.html">Step 5: Create the Knowledge Base</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../quickstart/06_generate_representative_training_data.html">Step 6: Generate Representative Training Data</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../quickstart/07_train_the_natural_language_processing_classifiers.html">Step 7: Train the Natural Language Processing Classifiers</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../quickstart/08_configure_the_language_parser.html">Step 8: Configure the Language Parser</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../quickstart/09_optimize_question_answering_performance.html">Step 9: Optimize Question Answering Performance</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../quickstart/10_deploy_to_production.html">Step 10: Deploy Trained Models</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Blueprint Applications</span></p>
              <ul>
                <li class="toctree-l1">
                  <a class="reference internal" href="../blueprints/overview.html">Workbench Blueprints</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../blueprints/food_ordering.html">Food Ordering</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../blueprints/video_discovery.html">Video Discovery</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../blueprints/home_assistant.html">Home Assistant</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">User Guide</span></p>
              <ul>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/about.html">About this guide</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/getting_started.html">Getting Started</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/architecture.html">Platform Architecture</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/preprocessor.html">Working with the Preprocessor</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/nlp.html">Working with the Natural Language Processor</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/domain_classifier.html">Working with the Domain Classifier</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/intent_classifier.html">Working with the Intent Classifier</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/entity_recognizer.html">Working with the Entity Recognizer</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/lstm.html">Using LSTM for Entity Recognition</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/role_classifier.html">Working with the Role Classifier</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/entity_resolver.html">Working with the Entity Resolver</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/parser.html">Working with the Language Parser</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/custom_features.html">Working with User-Defined Features</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/kb.html">Working with the Knowledge Base and Question Answerer</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/dm.html">Working with the Dialogue Manager</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/voice.html">Dealing with Voice Inputs</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Versions</span></p>
              <ul>
                <li class="toctree-l1">
                  <a class="reference internal" href="../versions/changes.html">Recent Changes</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../versions/history.html">Package History</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">API</span></p>
              <ul>
                <li class="toctree-l1">
                  <a class="reference internal" href="../internal/api_reference.html">API Reference</a>
                </li>
              </ul>
            </div>
          </div><!---->
        </div>
      </div>
      <div class="container full-height flex">
        <div class="left-side">
            <div aria-label="main navigation" class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation">
              <p class="caption"><span class="caption-text">Introduction</span></p>
              <ul class="current">
                <li class="toctree-l1">
                  <a class="reference internal" href="../introduction/introduction_to_conversational_applications.html">Introduction to Conversational Applications</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../introduction/approaches_for_building_conversational_applications.html">Different Approaches for Building Conversational Applications</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../introduction/anatomy_of_a_conversational_ai_interaction.html">Anatomy of a Conversational AI Interaction</a>
                </li>
                <li class="toctree-l1 current">
                  <a class="current reference internal" href="../introduction/introducing_mindmeld_workbench.html">Introducing MindMeld Workbench</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../introduction/key_concepts.html">Key Concepts</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Step-by-Step Guide</span></p>
              <ul>
                <li class="toctree-l1">
                  <a class="reference internal" href="../quickstart/00_overview.html">Building a Conversational Interface in 10 Steps</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../quickstart/01_select_the_right_use_case.html">Step 1: Select the Right Use Case</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../quickstart/02_script_interactions.html">Step 2: Script Your Ideal Dialogue Interactions</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../quickstart/03_define_the_hierarchy.html">Step 3: Define the Domain, Intent, Entity, and Role Hierarchy</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../quickstart/04_define_the_dialogue_handlers.html">Step 4: Define the Dialogue State Handlers</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../quickstart/05_create_the_knowledge_base.html">Step 5: Create the Knowledge Base</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../quickstart/06_generate_representative_training_data.html">Step 6: Generate Representative Training Data</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../quickstart/07_train_the_natural_language_processing_classifiers.html">Step 7: Train the Natural Language Processing Classifiers</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../quickstart/08_configure_the_language_parser.html">Step 8: Configure the Language Parser</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../quickstart/09_optimize_question_answering_performance.html">Step 9: Optimize Question Answering Performance</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../quickstart/10_deploy_to_production.html">Step 10: Deploy Trained Models</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Blueprint Applications</span></p>
              <ul>
                <li class="toctree-l1">
                  <a class="reference internal" href="../blueprints/overview.html">Workbench Blueprints</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../blueprints/food_ordering.html">Food Ordering</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../blueprints/video_discovery.html">Video Discovery</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../blueprints/home_assistant.html">Home Assistant</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">User Guide</span></p>
              <ul>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/about.html">About this guide</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/getting_started.html">Getting Started</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/architecture.html">Platform Architecture</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/preprocessor.html">Working with the Preprocessor</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/nlp.html">Working with the Natural Language Processor</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/domain_classifier.html">Working with the Domain Classifier</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/intent_classifier.html">Working with the Intent Classifier</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/entity_recognizer.html">Working with the Entity Recognizer</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/lstm.html">Using LSTM for Entity Recognition</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/role_classifier.html">Working with the Role Classifier</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/entity_resolver.html">Working with the Entity Resolver</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/parser.html">Working with the Language Parser</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/custom_features.html">Working with User-Defined Features</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/kb.html">Working with the Knowledge Base and Question Answerer</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/dm.html">Working with the Dialogue Manager</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../userguide/voice.html">Dealing with Voice Inputs</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Versions</span></p>
              <ul>
                <li class="toctree-l1">
                  <a class="reference internal" href="../versions/changes.html">Recent Changes</a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="../versions/history.html">Package History</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">API</span></p>
              <ul>
                <li class="toctree-l1">
                  <a class="reference internal" href="../internal/api_reference.html">API Reference</a>
                </li>
              </ul>
            </div>
        </div>
        <div class="flex-auto content-container" id="content-container">
          <div class="content">
            <h1 class="fs-50" id="content-title">Working with the Preprocessor</h1>
            <div class="content-anchor">
              <div class="anchor-list">
                <p class="fs-22 anchor-item">Title goes here</p>
                <p class="fs-22 anchor-item">Title goes here</p>
                <p class="fs-22 anchor-item">Title goes here</p>
                <p class="fs-22 anchor-item">Title goes here</p>
                <p class="fs-22 anchor-item">Title goes here</p>
              </div>
            </div>
            <div class="content-detail">
              <div class="section" id="working-with-the-preprocessor">
                <p>The Preprocessor</p>
                <blockquote>
                <div><ul class="simple">
                <li>is an optional module that is run before any component in the Workbench pipeline</li>
                <li>uses app-specific logic defined by the developer to perform arbitrary text modifications on the user query before it is sent to the <a class="reference internal" href="nlp.html"><span class="doc">natural language processor</span></a></li>
                </ul>
                </div></blockquote>
                <p>Examples of some common preprocessing tasks include spelling correction, punctuation removal, handling special characters, sentence segmentation, and other kinds of application-specific text normalization.</p>
                <div class="section" id="implement-the-preprocessor">
                <h2>Implement the preprocessor<a class="headerlink" href="#implement-the-preprocessor" title="Permalink to this headline"></a></h2>
                <p>You can use the <code class="xref py py-class docutils literal"><span class="pre">Preprocessor</span></code> abstract class provided by Workbench as a template for defining your own custom preprocessing logic.</p>
                <p>The base class contains two methods:</p>
                <blockquote>
                <div><ul class="simple">
                <li><code class="xref py py-meth docutils literal"><span class="pre">process()</span></code>: takes in a text string and returns the processed string</li>
                <li><code class="xref py py-meth docutils literal"><span class="pre">get_char_index_map()</span></code>: generates the character mapping from the processed string to the original text string.</li>
                </ul>
                </div></blockquote>
                <p>While implementing the <code class="xref py py-meth docutils literal"><span class="pre">process()</span></code> method is mandatory and key to defining the functionality of your preprocessor, implementation of the <code class="xref py py-meth docutils literal"><span class="pre">get_char_index_map()</span></code> is optional. However, to ensure the proper functioning of downstream NLP components, it is essential that you implement this function whenever the length (character count) of the input query is changed by the <code class="xref py py-meth docutils literal"><span class="pre">process()</span></code> method.</p>
                <div class="section" id="example-stemming-as-a-preprocessing-step">
                <h3>Example: Stemming as a preprocessing step<a class="headerlink" href="#example-stemming-as-a-preprocessing-step" title="Permalink to this headline"><table class="docutils"></a></h3>
                <p>In this example, we define a basic preprocessor that does <a class="reference external" href="https://en.wikipedia.org/wiki/Stemming">stemming</a> using the <a class="reference external" href="https://tartarus.org/martin/PorterStemmer/">Porter Stemmer</a> implementation from <a class="reference external" href="https://www.nltk.org/">NLTK</a>. Stemming reduces each word to a base or root form called the word stem. E.g., the words “fish”, “fishes” and “fishing” all have the same stem, “fish”. This kind of preprocessing is widely used in information retrieval systems as a <a class="reference external" href="https://en.wikipedia.org/wiki/Query_expansion">query expansion</a> technique to improve search engine recall.</p>
                <p>You will need to install the NLTK package to try out the example below. Add the following code to a file named <code class="docutils literal"><span class="pre">stem_processor.py</span></code> and put it in your application folder.</p>
                <div class="literal-block-wrapper docutils container" id="id1">
                <div class="code-block-caption"><span class="caption-text">stem_processor.py</span><a class="headerlink" href="#id1" title="Permalink to this code"><table class="docutils"></a></div>
                <div class="highlight-python"><div class="highlight"><pre><span></span>  <span class="kn">from</span> <span class="nn">mmworkbench.components</span> <span class="kn">import</span> <span class="n">Preprocessor</span>
                  <span class="kn">from</span> <span class="nn">nltk.stem</span> <span class="kn">import</span> <span class="n">PorterStemmer</span>


                  <span class="k">class</span> <span class="nc">StemProcessor</span><span class="p">(</span><span class="n">Preprocessor</span><span class="p">):</span>
                      <span class="sd">&quot;&quot;&quot;</span>
                <span class="sd">      An example or preprocessor for stemming</span>
                <span class="sd">      &quot;&quot;&quot;</span>
                      <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                          <span class="bp">self</span><span class="o">.</span><span class="n">stemmer</span> <span class="o">=</span> <span class="n">PorterStemmer</span><span class="p">()</span>

                      <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
                          <span class="sd">&quot;&quot;&quot; StemProcessor will take in a query text and process it to return the stemmed version of the query.</span>
                <span class="sd">          Args:</span>
                <span class="sd">            text (str)</span>

                <span class="sd">          Returns:</span>
                <span class="sd">            (str)</span>
                <span class="sd">          &quot;&quot;&quot;</span>
                          <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">stemmer</span><span class="o">.</span><span class="n">stem</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

                      <span class="k">def</span> <span class="nf">get_char_index_map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw_text</span><span class="p">,</span> <span class="n">processed_text</span><span class="p">):</span>
                          <span class="sd">&quot;&quot;&quot; This function is used to map between the raw text and the processed text, making certain assumptions between the raw text and the processed text.</span>
                <span class="sd">          We return the 1-1 mapping between the two strings, which the Dialogue Manager uses to compute the mapping between the entity spans in the processed text to the entity spans in the raw text.</span>

                <span class="sd">          Args:</span>
                <span class="sd">            raw_text (str)</span>
                <span class="sd">            processed_text (str)</span>

                <span class="sd">          Returns:</span>
                <span class="sd">            (dict)</span>
                <span class="sd">          &quot;&quot;&quot;</span>

                          <span class="n">raw_tokens</span> <span class="o">=</span> <span class="n">raw_text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                          <span class="n">processed_tokens</span> <span class="o">=</span> <span class="n">processed_text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>

                          <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">raw_tokens</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">processed_tokens</span><span class="p">):</span>
                              <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Stemming should not change the number of tokens!&#39;</span><span class="p">)</span>

                          <span class="n">forward</span> <span class="o">=</span> <span class="p">{}</span>
                          <span class="n">raw_index</span> <span class="o">=</span> <span class="mi">0</span>
                          <span class="n">processed_index</span> <span class="o">=</span> <span class="mi">0</span>
                          <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">raw_token</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">raw_tokens</span><span class="p">):</span>
                              <span class="n">processed_token</span> <span class="o">=</span> <span class="n">processed_tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                              <span class="k">for</span> <span class="n">character_count</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">raw_token</span><span class="p">)):</span>
                                  <span class="n">forward</span><span class="p">[</span><span class="n">raw_index</span> <span class="o">+</span> <span class="n">character_count</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">processed_index</span> <span class="o">+</span> <span class="n">character_count</span><span class="p">,</span>
                                                                             <span class="n">processed_index</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">processed_token</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

                              <span class="k">if</span> <span class="n">raw_index</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">raw_token</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">raw_text</span><span class="p">):</span>
                                  <span class="n">forward</span><span class="p">[</span><span class="n">raw_index</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">raw_token</span><span class="p">)]</span> <span class="o">=</span> <span class="n">processed_index</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">processed_token</span><span class="p">)</span>
                                  <span class="n">raw_index</span> <span class="o">+=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">raw_token</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                                  <span class="n">processed_index</span> <span class="o">+=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">processed_token</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

                          <span class="n">backward</span> <span class="o">=</span> <span class="p">{}</span>
                          <span class="k">for</span> <span class="n">character_index</span> <span class="ow">in</span> <span class="n">forward</span><span class="p">:</span>
                              <span class="k">if</span> <span class="n">forward</span><span class="p">[</span><span class="n">character_index</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">backward</span><span class="p">:</span>
                                  <span class="n">backward</span><span class="p">[</span><span class="n">forward</span><span class="p">[</span><span class="n">character_index</span><span class="p">]]</span> <span class="o">=</span> <span class="n">character_index</span>

                          <span class="k">return</span> <span class="n">forward</span><span class="p">,</span> <span class="n">backward</span>
                </pre></div>
                </div>
                </div>
                </div>
                </div>
                <div class="section" id="use-the-preprocessor">
                <h2>Use the preprocessor<a class="headerlink" href="#use-the-preprocessor" title="Permalink to this headline"></a></h2>
                <p>To use your custom preprocessing logic within your Workbench application, pass in an instance of your implemented preprocessor class when initializing the <code class="xref py py-class docutils literal"><span class="pre">Application</span></code> object in the application container file, <code class="docutils literal"><span class="pre">__init__.py</span></code>.</p>
                <div class="literal-block-wrapper docutils container" id="id2">
                <div class="code-block-caption"><span class="caption-text">__init__.py</span><a class="headerlink" href="#id2" title="Permalink to this code"><table class="docutils"></a></div>
                <div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mmworkbench</span> <span class="kn">import</span> <span class="n">Application</span>
                <span class="kn">from</span> <span class="nn">.stem_processor</span> <span class="kn">import</span> <span class="n">StemProcessor</span>

                <span class="n">preprocessor</span> <span class="o">=</span> <span class="n">StemProcessor</span><span class="p">()</span>
                <span class="n">app</span> <span class="o">=</span> <span class="n">Application</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">preprocessor</span><span class="o">=</span><span class="n">preprocessor</span><span class="p">)</span>
                </pre></div>
                </div>
                </div>
                </div>
                </div>
              
              <div class="section rst-footer-buttons">   
                <a href="nlp.html" class="btn btn-neutral float-right" title="Working with the Natural Language Processor" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
                <a href="architecture.html" class="btn btn-neutral float-left" title="Platform Architecture" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
              </div>
            </div>
          </div>
        </div>
        <div class="anchor-side">
          <div class="anchor-list">
            <nav id="nav-menu">
              <ul>
                <li><a class="nav-menu-item active">Home</a></li>
                <li><a class="nav-menu-item">Portfolio</a></li>
                <li><a class="nav-menu-item">About</a></li>
                <li><a class="nav-menu-item">Contact</a></li>
              </ul>
            </nav>
          </div>
        </div>
      </div>
    </div>
  </div>


  <script type="text/javascript">
    var naviHrefs = document.getElementsByClassName('navi-href');
    var navMenuItems = document.getElementsByClassName('nav-menu-item');
    var contentContainer = document.getElementById('content-container');
    var title = document.getElementById('content-title');
    var headerBar = document.getElementById('p-header');

    for(var i=0;i<navMenuItems.length;i++){
        (function (index) {
            navMenuItems[index].onclick=function () {
              for(let j=0;j<navMenuItems.length;j++){
                navMenuItems[j].classList.remove('active');
              }
              navMenuItems[index].classList.add("active");
              contentContainer.scrollTop=naviHrefs[index].offsetTop-headerBar.offsetHeight;
            }
        })(i)
    }

    contentContainer.onscroll = function(e){
      var st = contentContainer.scrollTop;
      for(let i=naviHrefs.length-1;i>=0;i--){
        if(st>=naviHrefs[i].offsetTop-headerBar.offsetHeight){
          for(let j=0;j<navMenuItems.length;j++){
            navMenuItems[j].classList.remove('active');
          }
          navMenuItems[i].classList.add("active");
          break;
        }
      }
    }
  </script>

</body>
</html>